import{G as y,r as l,d as Ee,u as Ie,j as e,A as Be,e as De,m as Oe,n as oe,W as We,o as me,p as c,c as ue,B as xe}from"./index-bVzjWzEY.js";function ze(o){return y({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(o)}function Me(o){return y({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11.5 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"path",attr:{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"},child:[]},{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]}]})(o)}function Ue(o){return y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(o)}const pe="https://ees121.com",Ze=()=>{const[o,he]=l.useState(""),[v,w]=l.useState(""),[C,S]=l.useState(""),[P,k]=l.useState(""),[F,m]=l.useState(""),[A,u]=l.useState(""),[L,x]=l.useState(""),[E,p]=l.useState(""),[I,B]=l.useState(""),[$e,ge]=l.useState(),[g,D]=l.useState([]),[O,W]=l.useState(""),[z,M]=l.useState(""),[U,$]=l.useState(""),[b,j]=l.useState(null),[fe,N]=l.useState(null),[R,Z]=l.useState(!0),be="https://res.cloudinary.com/dcfm0aowt/image/upload/v1739604108/user/phnbhd4onynoetzdxqjp.jpg",[T,G]=l.useState(!1),[je,Ne]=l.useState([]),[H,J]=l.useState(!1),[q,ye]=l.useState(null),_=l.useState(null),[K,f]=l.useState(!1),s=Ee();console.log(s.state,"ls----------------");const ve=Ie(),we=t=>{D(t),G(!1)},Ce=()=>{G(!T)};l.useEffect(()=>{var t,a,r;((t=s==null?void 0:s.state)==null?void 0:t.profilePic)===be?Z(!0):(j((a=s==null?void 0:s.state)==null?void 0:a.profilePic),N((r=s==null?void 0:s.state)==null?void 0:r.profilePic),Z(!1))},[s==null?void 0:s.state]);const Se=JSON.parse(localStorage.getItem("token")),Pe=async t=>{var a,r;f(!0);try{const d=await(await fetch(`https://api.postalpincode.in/pincode/${t}`)).json();if(console.log(d),d[0].Status==="Success"){const n=d[0].PostOffice[0];m(n.Name||""),u(n.District||""),x(n.State||""),p(n.Country||"")}else setError("Invalid Pincode! Please enter a valid one."),m(""),u(""),x(""),p("")}catch(i){setError(((r=(a=i.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch location details. Try again later.")}finally{f(!1)}},ke=t=>{const a=t.target.value.trim();B(a),a.length===6?Pe(a):(m(""),u(""),x(""),p(""),setError(""))},Fe=async()=>{try{const a=(await ue.get(`${pe}/category/getAllCategory`)).data.category.sort((r,i)=>r.categoryName.localeCompare(i.categoryName));Ne(a)}catch(t){console.error("Error fetching categories:",t)}};l.useEffect(()=>{Fe()},[]);const Q=t=>{const a=t.target.files[0];if(a){const r=URL.createObjectURL(a);console.log(r),j(a),N(r)}},V=()=>{J(t=>!t)},Ae=()=>{const t=_.current.getScreenshot();ye(t),J(!1),N(t)},Le=async t=>{var r,i,d;t.preventDefault();const a=new FormData;if(a.append("name",v),a.append("email",C),a.append("phone",P),a.append("address",JSON.stringify({area:F,city:A,state:L,country:E,pincode:I})),a.append("businessCategory",g),a.append("businessName",O),a.append("businessAddress",z),a.append("businessDetaile",U),q){const n=await(await fetch(q)).blob();a.append("profilePic",n)}else b&&a.append("profilePic",b);f(!0);try{const n=await ue.post(`${pe}/auth/updateProfile`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${Se}`}}),h=await n.data;console.log(h.message,"adited data"),he(h),n.status===200&&(xe(((r=n==null?void 0:n.data)==null?void 0:r.message)||"Profile Updated Successfully"),ve("/profile"),setTimeout(()=>{window.location.reload()},4e3))}catch(n){return console.log(n),xe((d=(i=n==null?void 0:n.response)==null?void 0:i.data)==null?void 0:d.message),!1}finally{f(!1)}};return l.useEffect(()=>{var t,a,r,i,d,n,h,X,Y,ee,se,te,ae,le,ne,re,ie,de,ce;w((t=s==null?void 0:s.state)==null?void 0:t.name),S((a=s==null?void 0:s.state)==null?void 0:a.email),k((r=s==null?void 0:s.state)==null?void 0:r.phone),m((d=(i=s==null?void 0:s.state)==null?void 0:i.address)==null?void 0:d.area),u((h=(n=s==null?void 0:s.state)==null?void 0:n.address)==null?void 0:h.city),x((Y=(X=s==null?void 0:s.state)==null?void 0:X.address)==null?void 0:Y.state),p((se=(ee=s==null?void 0:s.state)==null?void 0:ee.address)==null?void 0:se.country),B((ae=(te=s==null?void 0:s.state)==null?void 0:te.address)==null?void 0:ae.pincode),ge(((le=s==null?void 0:s.state)==null?void 0:le.address)||{}),D(((ne=s==null?void 0:s.state)==null?void 0:ne.businessCategory)||[]),W((re=s==null?void 0:s.state)==null?void 0:re.businessName),M((ie=s==null?void 0:s.state)==null?void 0:ie.businessAddress),$((de=s==null?void 0:s.state)==null?void 0:de.businessDetaile),j((ce=s==null?void 0:s.state)==null?void 0:ce.profilePic)},[s==null?void 0:s.state]),e.jsxs(e.Fragment,{children:[e.jsx(Be,{}),e.jsx(De,{}),e.jsx("section",{className:"py-28",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("h2",{className:"py-2",children:"Profile Setting"}),e.jsx("div",{className:"card border-0 bg-base-100 shadow-xl",children:e.jsxs("form",{action:"",onSubmit:Le,className:" p-3",children:[e.jsxs("div",{className:"profilepic d-flex justify-content-between",children:[e.jsx("label",{htmlFor:"profilePictureInput",className:`rounded-md m-3 cursor-pointer overflow-hidden ${H?"disabled":""}`,style:{position:"relative",width:"150px",height:"150px",objectFit:"cover",objectPosition:"center"},children:e.jsx("img",{src:fe||b||Oe,alt:"Profile",className:"rounded-md img-flied w-100"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:Q,className:"hidden",name:"profilePic",id:"profilePictureInput",disabled:!R}),e.jsx("button",{type:"button",onClick:V,disabled:!R,className:"position-absolute top-36 start-36 p-2 bg-white rounded-full mx-2",children:e.jsx(oe,{})}),e.jsxs("div",{className:"d-flex d-md-none",children:[e.jsx("label",{htmlFor:"cameraInput",className:"position-absolute top-36 start-36 p-2 bg-white rounded-full mx-2 cursor-pointer",children:e.jsx(oe,{})}),e.jsx("input",{type:"file",accept:"image/*",capture:"camera",id:"cameraInput",onChange:Q,className:"hidden"})]}),H&&e.jsx("div",{className:"webcam-overlay d-none d-md-flex",children:e.jsxs("div",{className:"webcam-popup",children:[e.jsx(We,{audio:!1,ref:_,screenshotFormat:"image/jpeg",className:"webcam"}),e.jsx("button",{type:"button",onClick:Ae,className:"btn btn-primary mt-2",children:"Capture"}),e.jsx("button",{type:"button",onClick:V,className:"btn btn-secondary mt-2",children:"Close"})]})})]}),e.jsxs("div",{className:"form-detaile d-flex flex-wrap w-full py-2 d-flex",children:[e.jsxs("div",{className:"col-12 col-md-6 p-2 w-full",children:[e.jsxs("div",{className:"my-1",children:[e.jsxs("label",{className:"block text-md font-medium p-2 text-bold ",children:[" ","Name"]}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border-2 rounded-md p-2",children:[e.jsx("input",{type:"name",value:v,onChange:t=>w(t.target.value),className:" w-100 outline-0 "}),e.jsx(Me,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsxs("label",{className:"block text-md font-medium p-2 text-bold ",children:[" ","Email"]}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border-2 rounded-md p-2",children:[e.jsx("input",{type:"email",value:C,onChange:t=>S(t.target.value),className:" w-100 outline-0 "}),e.jsx(me,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsxs("label",{className:"block text-md font-medium p-2 text-bold ",children:["Contact"," "]}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border-2 rounded-md p-2",children:[e.jsx("input",{type:"text",value:P,onChange:t=>k(t.target.value),className:" w-100 outline-0 "}),e.jsx(ze,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Address"}),e.jsxs("div",{className:"col-12 d-flex flex-wrap",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:F,onChange:t=>m(t.target.value),className:" w-100 outline-0 ",placeholder:"area"}),e.jsx(c,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:A,onChange:t=>u(t.target.value),className:" w-100 outline-0 ",placeholder:"city"}),e.jsx(c,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:L,onChange:t=>x(t.target.value),className:" w-100 outline-0 ",placeholder:"state"}),e.jsx(c,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border-2 rounded-md p-2 my-1",children:[e.jsx("input",{type:"text",value:E,onChange:t=>p(t.target.value),className:" w-100 outline-0 ",placeholder:"country"}),e.jsx(c,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:I,onChange:ke,maxLength:"6",className:" w-100 outline-0 bg-none",placeholder:"pincode"}),e.jsx(c,{className:"text-xl"})]})})]})]})]}),e.jsxs("div",{className:"col-12 col-md-6 p-2 w-full",children:[e.jsxs("div",{className:"my-1",children:[e.jsxs("label",{className:"block text-md font-medium p-2 text-bold ",children:["Bussiness Name"," "]}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border-2 rounded-md p-2",children:[e.jsx("input",{type:"text",value:O,onChange:t=>W(t.target.value),className:" w-100 outline-0 "}),e.jsx(me,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Category"}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:" border-2 text-capitalize rounded-md p-2 bg-white",onClick:Ce,children:g.length>0?e.jsx("span",{className:"inline-block px-3 text-black py-1  ",children:g}):e.jsx("span",{className:"text-gray-500 ps-3 py-1",children:"Select a category"})}),T&&e.jsx("ul",{className:"z-10 border border-gray-300 bg-white w-full mt-2 rounded-md  max-h-40 overflow-y-auto",children:je.map((t,a)=>e.jsx("li",{className:`cursor-pointer px-4 py-2 text-capitalize hover:bg-green-200 ${g===t.categoryName?"bg-green-200":""}`,onClick:()=>we(t.categoryName),children:t.categoryName},a))})]})]}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Address"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:z,onChange:t=>M(t.target.value),className:" w-100 outline-0 "}),e.jsx(c,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Detaile"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:U,onChange:t=>$(t.target.value),className:" w-100 outline-0 "}),e.jsx(c,{className:"text-xl"})]})]})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsxs("button",{type:"submit",className:"d-flex justify-content-center bg-orange text-white py-3 px-2 rounded-md hover:bg-primary ",disabled:K,children:[" ",K?e.jsx("div",{className:"spinner-border text-white",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}):" Save",e.jsx(Ue,{className:"text-xl text-bold mx-2"})]})})]})})]})})})})]})};export{Ze as default};
