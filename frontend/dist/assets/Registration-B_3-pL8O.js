import{G as K,r as t,U as Q,u as X,j as e,N as Y,l as Z,a as ee,b as se,L as te,B as c}from"./index-CXHMvH_X.js";function ae(m){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"4"},child:[]},{tag:"path",attr:{d:"M13 4.069V2h-2v2.069A8.01 8.01 0 0 0 4.069 11H2v2h2.069A8.008 8.008 0 0 0 11 19.931V22h2v-2.069A8.007 8.007 0 0 0 19.931 13H22v-2h-2.069A8.008 8.008 0 0 0 13 4.069zM12 18c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z"},child:[]}]})(m)}function ne(){const{user:m}=t.useContext(Q),[g,A]=t.useState(""),[i,q]=t.useState(""),[o,k]=t.useState(""),[b,F]=t.useState(""),[d,I]=t.useState(""),[p,C]=t.useState(""),[x,S]=t.useState(""),[h,P]=t.useState(""),[f,E]=t.useState(""),[y,L]=t.useState("");t.useState("");const[M,j]=t.useState([]);t.useState("");const[re,u]=t.useState(!1),[r,R]=t.useState({}),[v,U]=t.useState(null),[w,$]=t.useState(!1);localStorage.getItem("token");const z=X();if(m)return e.jsx(Y,{to:"/"});const G=()=>{$(!w)};t.useEffect(()=>{const a=new URLSearchParams(location.search).get("referralCode");a&&U(a)},[]);const H=()=>{const s={};return g||(s.name="Name is required."),i?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)?i.endsWith("@gmail.com")||(s.email="Please use your @gmail.com.com email."):s.email="Please enter a valid email address.":s.email="Email is required.",d?/^\d{10}$/.test(d)||(s.phone="Phone number must be exactly 10 digits."):s.phone="Phone number is required.",o?o.length<4&&(s.password="Password must be at least 4 characters long."):s.password="Password is required.",o!==b&&(s.confirmpassword="Passwords do not match."),x||(s.area="Area is required."),h||(s.city="City is required."),f||(s.state="State is required."),y||(s.country="Country is required."),p||(s.pincode="Pincode is required."),R(s),Object.keys(s).length===0},B=async s=>{const a=s.target.value;if(C(a),a.length===6){u(!0);try{const n=await(await fetch(`https://api.postalpincode.in/pincode/${a}`)).json();n[0].Status==="Success"?j({city:n[0].PostOffice[0].District,state:n[0].PostOffice[0].State}):(j({city:"",state:""}),alert("Invalid Pincode"))}catch(l){console.error("Error fetching address:",l)}finally{u(!1)}}},O=()=>{if(!navigator.geolocation){c.error("Geolocation is not supported by this browser.");return}navigator.geolocation.getCurrentPosition(async s=>{const{latitude:a,longitude:l}=s.coords;console.log("Latitude:",a,"Longitude:",l);try{const N=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${a}&lon=${l}&format=json&zoom=18&addressdetails=1`)).json();if(N.address){const{town:D,state_district:W,state:T,country:_,postcode:J}=N.address;console.log("Fetched Address:",N.address),S(D||""),C(J||""),P(W||""),E(T||""),L(_||""),c.success("Location fetched successfully!")}else c.error("Failed to fetch location. Try again.")}catch(n){console.error("Error fetching location:",n),c.error("Failed to fetch location details.")}},s=>{console.error("Geolocation Error:",s),c.error("Please allow location access.")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},V=async s=>{if(u(!0),s.preventDefault(),!H()){u(!1);return}let a={area:x,city:h,state:f,country:y,pincode:p};j(a),console.log(M,"address"),z("/registernext",{state:{name:g,email:i,password:o,confirmpassword:o,phone:d,address:a,referralCode:v}})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:" min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"sm:m-10 sm:rounded-lg flex justify-center flex-1",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center bg-gray-100 p-8",children:[e.jsx("img",{src:Z,width:100,alt:"Logo",className:"mb-6"}),e.jsx("img",{src:"https://readymadeui.com/signin-image.webp",width:300,alt:"Sign Up Illustration",className:"max-w-xs"})]}),e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 text-center pb-4",children:"Create an Account"}),e.jsxs("form",{onSubmit:V,children:[v&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-gray-600 text-sm",children:"Referral Code:"}),e.jsx("input",{type:"text",value:v,disabled:!0,className:"w-full px-4 py-2 border rounded-md bg-gray-200"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:g,onChange:s=>A(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Full Name"}),r.name&&e.jsx("span",{className:"text-red-500 text-sm",children:r.name})]}),e.jsxs("div",{children:[e.jsx("input",{type:"email",value:i,onChange:s=>q(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Email"}),r.email?e.jsx("span",{className:"text-red-500 text-sm",children:r.email}):e.jsx("span",{className:"text-gray-500 text-xs",children:"Email must end with @gmail.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:w?"text":"password",value:o,onChange:s=>k(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Password"}),e.jsx("button",{type:"button",onClick:G,className:"absolute right-4 top-3 text-gray-600",children:w?e.jsx(ee,{}):e.jsx(se,{})}),r.password&&e.jsx("span",{className:"text-red-500 text-sm",children:r.password})]}),e.jsxs("div",{children:[e.jsx("input",{type:"password",value:b,onChange:s=>F(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Confirm Password"}),r.confirmpassword&&e.jsx("span",{className:"text-red-500 text-sm",children:r.confirmpassword})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("input",{type:"text",value:d,onChange:s=>I(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Phone Number"}),r.phone&&e.jsx("span",{className:"text-red-500 text-sm",children:r.phone})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("input",{type:"text",value:p,onChange:B,maxLength:"6",className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Pincode"}),e.jsx("button",{onClick:O,className:" px-4 py-2  bg-gray-400 text-white rounded-md",children:e.jsx(ae,{size:22})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsx("input",{type:"text",value:x,onChange:s=>S(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Area"}),e.jsx("input",{type:"text",value:h,onChange:s=>P(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"City"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsx("input",{type:"text",value:f,onChange:s=>E(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"State"}),e.jsx("input",{type:"text",value:y,onChange:s=>L(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Country"})]})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs("button",{type:"submit",className:"px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300 flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"}),e.jsx("circle",{cx:"8.5",cy:7,r:4}),e.jsx("path",{d:"M20 8v6M23 11h-6"})]}),"Sign Up"]})}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Already have an account?",e.jsx(te,{to:"/login",className:"text-success link-underline-success font-semibold hover:underline text-lg ml-1",children:"Log in"})]})]})]})]})})})})}export{ne as default};
