import{r,j as e,c as N,B as u,M as C,U as A,d as S,u as B,A as P,e as I,P as F,f as D,g as E,h as L,L as $,i as R,k as Y,m as U}from"./index-xKEadWzh.js";import{s as O,a as z}from"./startSilver-5oWuoMuE.js";import{C as T}from"./CurrentLocation-iae3cRUL.js";const _="https://ees121.com",M=()=>{const[s,p]=r.useState(null),[h,l]=r.useState(null),g=JSON.parse(localStorage.getItem("token")),[n,m]=r.useState(!1),c=x=>{const a=x.target.files[0];p(a),l(URL.createObjectURL(a))},b=async x=>{if(x.preventDefault(),!s){alert("Please upload an image");return}const a=new FormData;a.append("banner",s),console.log("FormData:",Object.fromEntries(a));try{m(!0);const d=await N.post(`${_}/banner/addBanner`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${g}`}});u("Banner Added Successfully"),window.location.reload(),p(null),l(null)}catch(d){console.error("Error details:",d),u(d.response.data.message)}finally{m(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:b,className:"flex flex-col items-center gap-4 p-4 border border-gray-300 rounded-lg shadow-md bg-white",children:[e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer flex items-center justify-center w-full max-w-xs h-24 border-2 border-dashed border-orange-500 text-orange-600 font-semibold rounded-lg hover:bg-orange-50 transition",children:"Add Offer Banner"}),e.jsx("input",{type:"file",id:"file-upload",name:"banner",onChange:c,className:"hidden"}),h&&e.jsx("img",{src:h,alt:"Preview",className:"w-48 h-auto rounded-md shadow-sm"}),e.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition disabled:opacity-50",disabled:n,children:n?e.jsx("div",{className:"spinner-border text-white w-5 h-5 animate-spin",role:"status"}):"Add"})]})})},w="https://ees121.com",H=()=>{const[s,p]=r.useState([]),[h,l]=r.useState(null),g=JSON.parse(localStorage.getItem("token")),[n,m]=r.useState(!1);if(!g)return e.jsx("div",{children:"You must be logged in to view banners."});const c=async()=>{m(!0);try{const a=await N.get(`${w}/banner/getBanners`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`}});if(a.status===200){const d=a.data;p(d.banners)}}catch(a){l("Error fetching banners. Please try again later."),console.error("Error fetching banners:",a)}finally{m(!1)}},b=async a=>{u.info(e.jsxs("div",{children:[e.jsx("p",{children:"Are you sure you want to delete this Banner?"}),e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>x(a),children:"Yes"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:u.dismiss,children:"No"})]})]}),{autoClose:!0,closeOnClick:!0})},x=async a=>{u.dismiss();try{(await N.delete(`${w}/banner/deleteBanner`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},data:{bannerId:a}})).status===200&&(console.log("Banner deleted successfully"),c())}catch(d){l("Error deleting banner. Please try again later."),console.error("Error deleting banner:",d)}finally{m(!1)}};return r.useEffect(()=>{c()},[]),e.jsx("section",{className:"mt-3",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 d-flex flex-wrap",children:[h&&e.jsx("div",{className:"alert alert-danger",children:h}),s.length>0?s.map((a,d)=>e.jsx("div",{className:"col-md-4 p-1",children:e.jsxs("div",{className:"card card-banners h-100 w-100 overflow-hidden",children:[e.jsx("div",{className:"img-banner",style:{height:"100%"},children:e.jsx("img",{src:a.imageUrl,className:"card-img-top overflow-hidden img-fluid",style:{objectFit:"cover",height:"100%"},alt:a.description||"Banner"})}),e.jsx("div",{className:"banner-Btn",children:e.jsx("button",{className:"btn bg-orange text-white fs-4 p-2",onClick:()=>b(a._id),disabled:n,children:n?e.jsx("div",{className:"spinner-border text-white",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}):e.jsx(C,{})})})]})},d)):e.jsx("div",{children:"No banners available."})]})})})})},K="https://ees121.com",q=({userId:s})=>{const[p,h]=r.useState(!1),[l,g]=r.useState(!1),[n,m]=r.useState(""),c=async()=>{var b,x;try{g(!0);const a=await N.delete(`${K}/auth/deleteUser`,{data:{id:s}});m(a.data.message),g(!1),u.success("user deleted success"),setTimeout(()=>window.location.reload(),5e3)}catch(a){m(((x=(b=a.response)==null?void 0:b.data)==null?void 0:x.message)||"Error deleting account"),g(!1),u.error("Error deleting user")}};return e.jsx("div",{className:"container px-0 mt-10",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-xl shadow-sm",children:[e.jsx("h3",{className:"text-red-600 font-semibold text-lg mb-2",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-red-500 mb-4",children:"This will permanently delete your account and all related data. This action cannot be undone."}),p?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Are you sure?"}),e.jsx("button",{onClick:c,disabled:l,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:l?"Deleting...":"Yes, delete my account"}),e.jsx("button",{onClick:()=>h(!1),className:"ml-2 text-gray-600 underline text-sm",children:"Cancel"})]}):e.jsx("button",{onClick:()=>h(!0),className:"text-white hover:underline text-sm bg-red-600 py-2 px-3 rounded-xl",children:"Delete my account"}),n&&e.jsx("p",{className:"mt-3 text-sm text-gray-600",children:n})]})})},G="https://ees121.com",J=({onClose:s,onSubmit:p,useruniqueId:h})=>{const[l,g]=r.useState(1),[n,m]=r.useState({bankAccountNumber:"",ifscCode:"",accountHolderName:""}),[c,b]=r.useState({bankProof:null,panCardfront:null,panCardback:null,frontAadhar:null,backAadhar:null}),[x,a]=r.useState({bankProof:null,panCardfront:null,panCardback:null,frontAadhar:null,backAadhar:null}),d=(t,i)=>{const j=t.target.files[0];if(j){if(j.size>2*1024*1024){u.error("File size should not exceed 2MB.");return}b(f=>({...f,[i]:j})),a(f=>({...f,[i]:URL.createObjectURL(j)}))}},k=[{name:"Bank Proof",field:"bankProof"},{name:"PAN Front",field:"panCardfront"},{name:"PAN Back",field:"panCardback"}],y=async()=>{if(!c.bankProof||!c.panCardfront||!c.panCardback){u.error("Please upload all required documents.");return}const t=new FormData;t.append("bankProof",c.bankProof),t.append("panCardfront",c.panCardfront),t.append("panCardback",c.panCardback),t.append("bankAccountNumber",n.bankAccountNumber),t.append("accountHolderName",n.accountHolderName),t.append("ifscCode",n.ifscCode),t.append("useruniqueId",h);try{const i=await N.post(`${G}/withdrawal/addkyc`,t,{withCredentials:!0});console.log(i.data,"response.data"),i.status===201?(u.success("KYC details submitted successfully!"),p(),s(),window.location.reload()):u.error("Submission failed. Try again.")}catch(i){console.error("Error:",i),u.error("Something went wrong!")}},v=()=>{u.dismiss(),y()},o=()=>{u.info(e.jsxs("div",{children:[e.jsx("p",{children:"Are you sure you want to submit?"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[e.jsx("button",{onClick:v,style:{color:"green",border:"none",background:"transparent",cursor:"pointer"},children:"Yes"}),e.jsx("button",{onClick:()=>u.dismiss(),style:{color:"red",border:"none",background:"transparent",cursor:"pointer"},children:"No"})]})]}),{autoClose:!1})};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 p-5 z-50",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-lg shadow-lg p-6 relative",children:[e.jsx("button",{className:"absolute top-2 right-4 bg-gray-200 hover:bg-gray-300 rounded-full p-2",onClick:s,children:"✕"}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:l===1?"Enter Bank Details":"Upload Documents"}),l===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Account Holder Name",e.jsx("input",{type:"text",value:n.accountHolderName,onChange:t=>m({...n,accountHolderName:t.target.value}),className:"w-full p-2 border rounded mt-1"})]}),e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Bank Account Number",e.jsx("input",{type:"text",value:n.bankAccountNumber,onChange:t=>m({...n,bankAccountNumber:t.target.value}),className:"w-full p-2 border rounded mt-1"})]}),e.jsxs("label",{className:"block text-gray-700 font-medium",children:["IFSC Code",e.jsx("input",{type:"text",value:n.ifscCode,onChange:t=>m({...n,ifscCode:t.target.value}),className:"w-full p-2 border rounded mt-1"})]})]}),l===2&&e.jsx("div",{className:"grid grid-cols-2 gap-4",children:k.map(({name:t,field:i})=>e.jsxs("label",{className:"block text-gray-700 font-medium ",children:[t,e.jsxs("div",{className:"mt-1 w-full border-2 border-dashed border-gray-300 p-4 rounded-lg flex flex-col items-center cursor-pointer hover:border-blue-500 transition relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:j=>d(j,i),className:"hidden",id:i}),e.jsx("label",{htmlFor:i,className:"flex flex-col items-center text-gray-500 cursor-pointer",children:x[i]?e.jsx("img",{src:x[i],alt:t,className:"w-24 h-24 object-cover rounded-lg"}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"text-2xl mb-2 text-gray-400"}),e.jsx("span",{className:"text-sm",children:"Click to upload"})]})})]})]},i))}),e.jsxs("div",{className:"flex justify-between mt-4",children:[l>1&&e.jsx("button",{className:"p-2 bg-gray-400 rounded",onClick:()=>g(l-1),children:"Back"}),l<2?e.jsx("button",{className:"p-2 bg-blue-600 text-white rounded",onClick:()=>g(l+1),children:"Next"}):e.jsx("button",{className:"p-2 bg-green-600 text-white rounded",onClick:o,children:"Submit"})]})]})})},X=()=>{var v;const{user:s}=r.useContext(A);console.log(s,"user---------------------------------");const[p,h]=r.useState(!1),l=S(),[g,n]=r.useState(0),[m,c]=r.useState(!1),[b,x]=r.useState(null),a=B(),d=`${window.location.origin}/register?referralCode=${s==null?void 0:s._id}`;r.useEffect(()=>{if(l.hash==="#kyc-section"){const o=document.getElementById("kyc-section");o&&o.scrollIntoView({behavior:"smooth"})}},[l]);const k=()=>{navigator.clipboard.writeText(d),h(!0),setTimeout(()=>h(!1),2e3)},y=(o=0,t=10,i=!1)=>Array.from({length:t},(j,f)=>e.jsx("img",{src:f<o?O:z,alt:f<o?"Filled Star":"Empty Star",width:16,className:`cursor-pointer ${i?"hover:opacity-80":""}`,onClick:i?()=>n(f+1):void 0},f));return e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx(I,{}),e.jsx(F,{}),e.jsxs("div",{className:"my-24",children:[e.jsx("section",{className:"",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"w-full bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("img",{className:"w-full h-[200px] object-cover rounded-md",src:"https://img.freepik.com/free-vector/colorful-watercolor-texture-background_1035-19319.jpg?ga=GA1.1.897959581.1731651336&semt=ais_hybrid",alt:"Banner"}),e.jsx("div",{className:"absolute bottom-[-70px] right-14 w-[200px] h-[200px] rounded-full border-4 border-white ring-4 ring-orange-500 shadow-lg overflow-hidden",children:e.jsx("img",{src:s.profilePic||D,alt:"Profile",className:"w-full h-full object-cover"})})]}),e.jsxs("div",{className:"px-3 md:px-5",children:[e.jsxs("div",{className:"mt-24 md:mt-8 text-left sm:text-left",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-700",children:s==null?void 0:s.name}),s!=null&&s.profilePic?null:e.jsx("p",{className:"text-orange text-sm",children:"You haven't set a profile picture yet."}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-sm",children:"User Rating:"}),typeof(s==null?void 0:s.userAverageRating)=="number"&&e.jsxs("div",{className:"flex items-center",children:[y(Math.round((s==null?void 0:s.userAverageRating)||0),10),e.jsxs("span",{className:"pl-2",children:[s==null?void 0:s.userAverageRating,".0"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-sm",children:"Provider Rating:"}),(s==null?void 0:s.providerAverageRating)&&e.jsxs("div",{className:"flex items-center",children:[y(Math.round((s==null?void 0:s.providerAverageRating)||0),10),e.jsx("span",{className:"pl-2",children:(v=s==null?void 0:s.providerAverageRating)==null?void 0:v.toFixed(1)})]})]})]}),e.jsxs("div",{className:"mt-4 text-gray-700 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s==null?void 0:s.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +91",s==null?void 0:s.phone]}),e.jsx(T,{user:s})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-100 p-4 rounded-md",children:[e.jsx("p",{className:"text-gray-600 font-medium",children:"Your Referral Link:"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-blue-600 font-medium truncate",children:d}),e.jsx("button",{onClick:k,className:"text-gray-500 hover:text-blue-500",children:p?e.jsx(E,{size:20}):e.jsx(L,{size:20})}),e.jsx($,{to:`whatsapp://send?text=${d}`,className:"text-white bg-orange text-sm p-2 rounded-md flex items-center",children:e.jsx(R,{size:16})})]}),p&&e.jsx("p",{className:"text-green-500 text-sm",children:"Copied!"})]}),e.jsxs("div",{id:"kyc-section",className:"mt-6 bg-gray-100 p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"KYC Details"}),s.ekyc?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Account Holder Name:"})," ",s.ekyc.accountHolderName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bank Account Number:"})," ",s.ekyc.bankAccountNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"IFSC Code:"})," ",s.ekyc.ifscCode]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," ₹",s.ekyc.amount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"}),e.jsx("span",{className:`ml-2 text-sm ${s.ekyc.status==="pending"?"text-gray-600":"text-green-600"}`,children:s.ekyc.status==="pending"?"Pending (Your KYC Details are waiting for admin's approval)":s.ekyc.status})]})]}),e.jsx("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-3 gap-6 text-center",children:[{label:"Bank Proof",src:s.ekyc.bankProof},{label:"PAN Card (Front)",src:s.ekyc.panCardfront},{label:"PAN Card (Back)",src:s.ekyc.panCardback}].map((o,t)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:o.src,alt:o.label,className:"w-[200px] rounded-md shadow-sm cursor-pointer",onClick:()=>x(o.src)}),e.jsx("p",{className:"mt-2 text-md font-medium",children:o.label})]},t))})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("p",{className:"text-gray-600",children:"KYC details not uploaded yet."}),e.jsx("button",{onClick:()=>c(!0),className:"mt-3 bg-orange text-white py-2 px-4 rounded-md font-semibold hover:bg-orange-600 transition",children:"Complete KYC"})]}),b&&e.jsx("div",{className:"fixed inset-0 flex justify-center items-center bg-black bg-opacity-75 z-50",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded-full",onClick:()=>x(null),children:"✕"}),e.jsx("img",{src:b,alt:"Preview",className:"max-w-full max-h-[90vh] rounded-lg shadow-lg cursor-pointer"})]})}),e.jsx("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-6 text-center",children:[{label:"Aadhaar Front",src:s==null?void 0:s.frontAadhar},{label:"Aadhaar Back",src:s==null?void 0:s.backAadhar}].map((o,t)=>e.jsx("div",{className:"flex flex-col items-center",children:o.src?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:o.src,alt:o.label,className:"w-[200px] rounded-md shadow-sm cursor-pointer",onClick:()=>x(o.src)}),e.jsx("p",{className:"mt-2 text-md font-medium",children:o.label})]}):e.jsxs("p",{className:"text-gray-600",children:["No ",o.label," uploaded"]})},t))})]}),m&&e.jsx(J,{useruniqueId:s.userId,onClose:()=>c(!1),onSubmit:()=>{c(!1)}}),e.jsxs("div",{className:"mt-4",children:[(s==null?void 0:s.userId)&&e.jsxs("p",{className:"text-gray-600 font-medium",children:["Unique ID:"," ",e.jsxs("span",{className:"text-gray-800 font-semibold",children:["EES121-",s==null?void 0:s.userId]})]}),e.jsxs("p",{className:"text-gray-600 font-medium",children:["Business Category:"," ",e.jsx("span",{className:"text-gray-800 font-semibold",children:s==null?void 0:s.businessCategory})]}),e.jsxs("p",{className:"text-gray-600 font-medium",children:["Business Details:"," ",e.jsx("span",{className:"text-gray-800 font-semibold",children:s==null?void 0:s.businessDetaile})]}),e.jsxs("p",{className:"text-gray-600 font-medium",children:["Business Address:"," ",e.jsx("span",{className:"text-gray-800 font-semibold",children:s==null?void 0:s.businessAddress})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["Status:"," "]}),e.jsx("span",{className:`font-semibold ${(s==null?void 0:s.userstatus)==="available"?"text-green-600":"text-red-600"}`,children:s==null?void 0:s.userstatus})]}),e.jsxs("div",{className:"",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["Account Created On :"," "]}),e.jsx("span",{className:"font-semibold ",children:new Date(s==null?void 0:s.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["paymentExpiry:"," "]}),e.jsx("span",{className:"font-semibold ",children:new Date(s==null?void 0:s.paymentExpiry).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsx("div",{className:"mt-6 flex justify-center sm:justify-end",children:e.jsx("button",{onClick:()=>a("/editprofile",{state:s}),className:"bg-orange text-white py-2 px-4 rounded-full font-semibold uppercase text-sm",children:"Edit Profile"})}),e.jsx("div",{className:"mt-6",children:e.jsx(M,{})})]})]})})})}),e.jsx(H,{}),e.jsx(q,{userId:s._id})]}),e.jsx(Y,{})]})};export{X as default};
