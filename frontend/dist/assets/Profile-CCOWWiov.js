import{r as l,j as e,c as v,B as d,M as C,U as A,d as S,u as B,A as P,e as F,P as I,f as D,g as E,h as L,L as R,i as $,k as Y,m as U}from"./index-D7uqh0Lm.js";import{s as O,a as z}from"./startSilver-5oWuoMuE.js";import{C as H}from"./CurrentLocation-D4mi2xI8.js";const K="https://ees121.com",M=()=>{const[s,p]=l.useState(null),[o,m]=l.useState(null),c=JSON.parse(localStorage.getItem("token")),[x,r]=l.useState(!1),u=h=>{const t=h.target.files[0];p(t),m(URL.createObjectURL(t))},g=async h=>{if(h.preventDefault(),!s){alert("Please upload an image");return}const t=new FormData;t.append("banner",s),console.log("FormData:",Object.fromEntries(t));try{r(!0);const i=await v.post(`${K}/banner/addBanner`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${c}`}});d("Banner Added Successfully"),window.location.reload(),p(null),m(null)}catch(i){console.error("Error details:",i),d(i.response.data.message)}finally{r(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:g,className:"flex flex-col items-center gap-4 p-4 border border-gray-300 rounded-lg shadow-md bg-white",children:[e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer flex items-center justify-center w-full max-w-xs h-24 border-2 border-dashed border-orange-500 text-orange-600 font-semibold rounded-lg hover:bg-orange-50 transition",children:"Add Offer Banner"}),e.jsx("input",{type:"file",id:"file-upload",name:"banner",onChange:u,className:"hidden"}),o&&e.jsx("img",{src:o,alt:"Preview",className:"w-48 h-auto rounded-md shadow-sm"}),e.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition disabled:opacity-50",disabled:x,children:x?e.jsx("div",{className:"spinner-border text-white w-5 h-5 animate-spin",role:"status"}):"Add"})]})})},w="https://ees121.com",_=()=>{const[s,p]=l.useState([]),[o,m]=l.useState(null),c=JSON.parse(localStorage.getItem("token")),[x,r]=l.useState(!1);if(!c)return e.jsx("div",{children:"You must be logged in to view banners."});const u=async()=>{r(!0);try{const t=await v.get(`${w}/banner/getBanners`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}});if(t.status===200){const i=t.data;p(i.banners)}}catch(t){m("Error fetching banners. Please try again later."),console.error("Error fetching banners:",t)}finally{r(!1)}},g=async t=>{d.info(e.jsxs("div",{children:[e.jsx("p",{children:"Are you sure you want to delete this Banner?"}),e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>h(t),children:"Yes"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:d.dismiss,children:"No"})]})]}),{autoClose:!0,closeOnClick:!0})},h=async t=>{d.dismiss();try{(await v.delete(`${w}/banner/deleteBanner`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},data:{bannerId:t}})).status===200&&(console.log("Banner deleted successfully"),u())}catch(i){m("Error deleting banner. Please try again later."),console.error("Error deleting banner:",i)}finally{r(!1)}};return l.useEffect(()=>{u()},[]),e.jsx("section",{className:"mt-3",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 d-flex flex-wrap",children:[o&&e.jsx("div",{className:"alert alert-danger",children:o}),s.length>0?s.map((t,i)=>e.jsx("div",{className:"col-md-4 p-1",children:e.jsxs("div",{className:"card card-banners h-100 w-100 overflow-hidden",children:[e.jsx("div",{className:"img-banner",style:{height:"100%"},children:e.jsx("img",{src:t.imageUrl,className:"card-img-top overflow-hidden img-fluid",style:{objectFit:"cover",height:"100%"},alt:t.description||"Banner"})}),e.jsx("div",{className:"banner-Btn",children:e.jsx("button",{className:"btn bg-orange text-white fs-4 p-2",onClick:()=>g(t._id),disabled:x,children:x?e.jsx("div",{className:"spinner-border text-white",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}):e.jsx(C,{})})})]})},i)):e.jsx("div",{children:"No banners available."})]})})})})},T="https://ees121.com",q=({onClose:s,onSubmit:p})=>{const[o,m]=l.useState(1),[c,x]=l.useState({bankAccountNumber:"",ifscCode:"",accountHolderName:""}),[r,u]=l.useState({bankProof:null,panCardfront:null,panCardback:null,frontAadhar:null,backAadhar:null}),[g,h]=l.useState({bankProof:null,panCardfront:null,panCardback:null,frontAadhar:null,backAadhar:null}),t=(a,n)=>{const b=a.target.files[0];if(b){if(b.size>2*1024*1024){d.error("File size should not exceed 2MB.");return}u(N=>({...N,[n]:b})),h(N=>({...N,[n]:URL.createObjectURL(b)}))}},i=[{name:"Bank Proof",field:"bankProof"},{name:"PAN Front",field:"panCardfront"},{name:"PAN Back",field:"panCardback"},{name:"Aadhar Front",field:"frontAadhar"},{name:"Aadhar Back",field:"backAadhar"}],k=async()=>{if(!r.bankProof||!r.panCardfront||!r.panCardback||!r.frontAadhar||!r.backAadhar){d.error("Please upload all required documents.");return}const a=new FormData;a.append("bankProof",r.bankProof),a.append("panCardfront",r.panCardfront),a.append("panCardback",r.panCardback),a.append("frontAadhar",r.frontAadhar),a.append("backAadhar",r.backAadhar),a.append("bankAccountNumber",c.bankAccountNumber),a.append("accountHolderName",c.accountHolderName),a.append("ifscCode",c.ifscCode);try{const n=await v.post(`${T}/withdrawal/addkyc`,a,{withCredentials:!0});console.log(n.data,"response.data"),n.status===201?(d.success("KYC details submitted successfully!"),p(),s(),window.location.reload()):d.error("Submission failed. Try again.")}catch(n){console.error("Error:",n),d.error("Something went wrong!")}},f=()=>{d.dismiss(),k()},j=()=>{d.info(e.jsxs("div",{children:[e.jsx("p",{children:"Are you sure you want to submit?"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[e.jsx("button",{onClick:f,style:{color:"green",border:"none",background:"transparent",cursor:"pointer"},children:"Yes"}),e.jsx("button",{onClick:()=>d.dismiss(),style:{color:"red",border:"none",background:"transparent",cursor:"pointer"},children:"No"})]})]}),{autoClose:!1})};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 p-5 z-50",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-lg shadow-lg p-6 relative",children:[e.jsx("button",{className:"absolute top-2 right-4 bg-gray-200 hover:bg-gray-300 rounded-full p-2",onClick:s,children:"✕"}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:o===1?"Enter Bank Details":"Upload Documents"}),o===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Account Holder Name",e.jsx("input",{type:"text",value:c.accountHolderName,onChange:a=>x({...c,accountHolderName:a.target.value}),className:"w-full p-2 border rounded mt-1"})]}),e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Bank Account Number",e.jsx("input",{type:"text",value:c.bankAccountNumber,onChange:a=>x({...c,bankAccountNumber:a.target.value}),className:"w-full p-2 border rounded mt-1"})]}),e.jsxs("label",{className:"block text-gray-700 font-medium",children:["IFSC Code",e.jsx("input",{type:"text",value:c.ifscCode,onChange:a=>x({...c,ifscCode:a.target.value}),className:"w-full p-2 border rounded mt-1"})]})]}),o===2&&e.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.map(({name:a,field:n})=>e.jsxs("label",{className:"block text-gray-700 font-medium ",children:[a,e.jsxs("div",{className:"mt-1 w-full border-2 border-dashed border-gray-300 p-4 rounded-lg flex flex-col items-center cursor-pointer hover:border-blue-500 transition relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:b=>t(b,n),className:"hidden",id:n}),e.jsx("label",{htmlFor:n,className:"flex flex-col items-center text-gray-500 cursor-pointer",children:g[n]?e.jsx("img",{src:g[n],alt:a,className:"w-24 h-24 object-cover rounded-lg"}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"text-2xl mb-2 text-gray-400"}),e.jsx("span",{className:"text-sm",children:"Click to upload"})]})})]})]},n))}),e.jsxs("div",{className:"flex justify-between mt-4",children:[o>1&&e.jsx("button",{className:"p-2 bg-gray-400 rounded",onClick:()=>m(o-1),children:"Back"}),o<2?e.jsx("button",{className:"p-2 bg-blue-600 text-white rounded",onClick:()=>m(o+1),children:"Next"}):e.jsx("button",{className:"p-2 bg-green-600 text-white rounded",onClick:j,children:"Submit"})]})]})})},V=()=>{var j;const{user:s}=l.useContext(A);console.log(s,"user---------------------------------");const[p,o]=l.useState(!1),m=S(),[c,x]=l.useState(0),[r,u]=l.useState(!1),[g,h]=l.useState(null),t=B(),i=`${window.location.origin}/register?referralCode=${s==null?void 0:s._id}`;l.useEffect(()=>{if(m.hash==="#kyc-section"){const a=document.getElementById("kyc-section");a&&a.scrollIntoView({behavior:"smooth"})}},[m]);const k=()=>{navigator.clipboard.writeText(i),o(!0),setTimeout(()=>o(!1),2e3)},f=(a=0,n=10,b=!1)=>Array.from({length:n},(N,y)=>e.jsx("img",{src:y<a?O:z,alt:y<a?"Filled Star":"Empty Star",width:16,className:`cursor-pointer ${b?"hover:opacity-80":""}`,onClick:b?()=>x(y+1):void 0},y));return e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx(F,{}),e.jsx(I,{}),e.jsxs("div",{className:"my-24",children:[e.jsx("section",{className:"",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"w-full bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("img",{className:"w-full h-[200px] object-cover rounded-md",src:"https://img.freepik.com/free-vector/colorful-watercolor-texture-background_1035-19319.jpg?ga=GA1.1.897959581.1731651336&semt=ais_hybrid",alt:"Banner"}),e.jsx("div",{className:"absolute bottom-[-70px] right-14 w-[200px] h-[200px] rounded-full border-4 border-white ring-4 ring-orange-500 shadow-lg overflow-hidden",children:e.jsx("img",{src:s.profilePic||D,alt:"Profile",className:"w-full h-full object-cover"})})]}),e.jsxs("div",{className:"px-3 md:px-5",children:[e.jsxs("div",{className:"mt-24 md:mt-8 text-left sm:text-left",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-700",children:s==null?void 0:s.name}),s!=null&&s.profilePic?null:e.jsx("p",{className:"text-orange text-sm",children:"You haven't set a profile picture yet."}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-sm",children:"User Rating:"}),typeof(s==null?void 0:s.userAverageRating)=="number"&&e.jsxs("div",{className:"flex items-center",children:[f(Math.round((s==null?void 0:s.userAverageRating)||0),10),e.jsxs("span",{className:"pl-2",children:[s==null?void 0:s.userAverageRating,".0"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-sm",children:"Provider Rating:"}),(s==null?void 0:s.providerAverageRating)&&e.jsxs("div",{className:"flex items-center",children:[f(Math.round((s==null?void 0:s.providerAverageRating)||0),10),e.jsx("span",{className:"pl-2",children:(j=s==null?void 0:s.providerAverageRating)==null?void 0:j.toFixed(1)})]})]})]}),e.jsxs("div",{className:"mt-4 text-gray-700 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s==null?void 0:s.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +91",s==null?void 0:s.phone]}),e.jsx(H,{user:s})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-100 p-4 rounded-md",children:[e.jsx("p",{className:"text-gray-600 font-medium",children:"Your Referral Link:"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-blue-600 font-medium truncate",children:i}),e.jsx("button",{onClick:k,className:"text-gray-500 hover:text-blue-500",children:p?e.jsx(E,{size:20}):e.jsx(L,{size:20})}),e.jsx(R,{to:`whatsapp://send?text=${i}`,className:"text-white bg-orange text-sm p-2 rounded-md flex items-center",children:e.jsx($,{size:16})})]}),p&&e.jsx("p",{className:"text-green-500 text-sm",children:"Copied!"})]}),e.jsxs("div",{id:"kyc-section",className:"mt-6 bg-gray-100 p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"KYC Details"}),s.ekyc?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Account Holder Name:"})," ",s.ekyc.accountHolderName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bank Account Number:"})," ",s.ekyc.bankAccountNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"IFSC Code:"})," ",s.ekyc.ifscCode]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," ₹",s.ekyc.amount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"}),e.jsx("span",{className:`ml-2 text-sm ${s.ekyc.status==="pending"?"text-gray-600":"text-green-600"}`,children:s.ekyc.status==="pending"?"Pending (Your KYC Details are waiting for admin's approval)":s.ekyc.status})]})]}),e.jsx("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-3 gap-6 text-center",children:[{label:"Bank Proof",src:s.ekyc.bankProof},{label:"PAN Card (Front)",src:s.ekyc.panCardfront},{label:"PAN Card (Back)",src:s.ekyc.panCardback}].map((a,n)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:a.src,alt:a.label,className:"w-[200px] rounded-md shadow-sm cursor-pointer",onClick:()=>h(a.src)}),e.jsx("p",{className:"mt-2 text-md font-medium",children:a.label})]},n))})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("p",{className:"text-gray-600",children:"KYC details not uploaded yet."}),e.jsx("button",{onClick:()=>u(!0),className:"mt-3 bg-orange text-white py-2 px-4 rounded-md font-semibold hover:bg-orange-600 transition",children:"Complete KYC"})]}),g&&e.jsx("div",{className:"fixed inset-0 flex justify-center items-center bg-black bg-opacity-75 z-50",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded-full",onClick:()=>h(null),children:"✕"}),e.jsx("img",{src:g,alt:"Preview",className:"max-w-full max-h-[90vh] rounded-lg shadow-lg cursor-pointer"})]})}),e.jsx("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-6 text-center",children:[{label:"Aadhaar Front",src:s==null?void 0:s.frontAadhar},{label:"Aadhaar Back",src:s==null?void 0:s.backAadhar}].map((a,n)=>e.jsx("div",{className:"flex flex-col items-center",children:a.src?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:a.src,alt:a.label,className:"w-[200px] rounded-md shadow-sm cursor-pointer",onClick:()=>h(a.src)}),e.jsx("p",{className:"mt-2 text-md font-medium",children:a.label})]}):e.jsxs("p",{className:"text-gray-600",children:["No ",a.label," uploaded"]})},n))})]}),r&&e.jsx(q,{onClose:()=>u(!1),onSubmit:()=>{u(!1)}}),e.jsxs("div",{className:"mt-4",children:[(s==null?void 0:s.userId)&&e.jsxs("p",{className:"text-gray-600 font-medium",children:["Unique ID:"," ",e.jsxs("span",{className:"text-gray-800 font-semibold",children:["EES121-",s==null?void 0:s.userId]})]}),e.jsxs("p",{className:"text-gray-600 font-medium",children:["Business Category:"," ",e.jsx("span",{className:"text-gray-800 font-semibold",children:s==null?void 0:s.businessCategory})]}),e.jsxs("p",{className:"text-gray-600 font-medium",children:["Business Details:"," ",e.jsx("span",{className:"text-gray-800 font-semibold",children:s==null?void 0:s.businessDetaile})]}),e.jsxs("p",{className:"text-gray-600 font-medium",children:["Business Address:"," ",e.jsx("span",{className:"text-gray-800 font-semibold",children:s==null?void 0:s.businessAddress})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["Status:"," "]}),e.jsx("span",{className:`font-semibold ${(s==null?void 0:s.userstatus)==="available"?"text-green-600":"text-red-600"}`,children:s==null?void 0:s.userstatus})]}),e.jsxs("div",{className:"",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["Account Created On :"," "]}),e.jsx("span",{className:"font-semibold ",children:new Date(s==null?void 0:s.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["paymentExpiry:"," "]}),e.jsx("span",{className:"font-semibold ",children:new Date(s==null?void 0:s.paymentExpiry).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsx("div",{className:"mt-6 flex justify-center sm:justify-end",children:e.jsx("button",{onClick:()=>t("/editprofile",{state:s}),className:"bg-orange text-white py-2 px-4 rounded-full font-semibold uppercase text-sm",children:"Edit Profile"})}),e.jsx("div",{className:"mt-6",children:e.jsx(M,{})})]})]})})})}),e.jsx(_,{})]}),e.jsx(Y,{})]})};export{V as default};
